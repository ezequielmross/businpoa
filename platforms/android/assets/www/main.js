angular.module("poabus",["ngRoute","ngTouch","ngAnimate","pasvaz.bindonce"]),angular.module("poabus").config(["$routeProvider",function($routeProvider){"use strict";$routeProvider.when("/home",{templateUrl:"home.html",controller:"HomeController"}),$routeProvider.when("/bus",{templateUrl:"listitems.html",controller:"BusController"}),$routeProvider.when("/lotacao",{templateUrl:"listitems.html",controller:"LotacaoController"}),$routeProvider.when("/itinerario/:term",{templateUrl:"itinerario.html",controller:"ItinerarioController"}),$routeProvider.when("/map/:term",{templateUrl:"mapa.html",controller:"MapController"}),$routeProvider.otherwise({redirectTo:"/home"})}]),angular.module("poabus").directive("tap",function(){"use strict";return function(scope,element,attrs){var tapping=!1;element.bind("touchstart",function(){tapping=!0}),element.bind("touchmove",function(){tapping=!1}),element.bind("touchend",function(){tapping&&scope.$apply(attrs.tap,element)})}}),angular.module("poabus").directive("tapclick",function(){"use strict";return function(scope,elm){elm.addClass("animated"),elm.bind("click",function(){elm.hasClass("expanded")?elm.removeClass("expanded"):elm.addClass("expanded")})}}),angular.module("poabus").controller("HomeController",["$scope",function(){"use strict"}]),angular.module("poabus").controller("ItinerarioController",["$scope","servicebusinpoa","$routeParams",function($scope,servicebusinpoa,$routeParams){"use strict";$scope.map="/map/"+$routeParams.term,servicebusinpoa.itinerario($routeParams.term).then(function(stuff){$scope.items=stuff,console.log(stuff)},function(){console.error("File not found!")})}]),angular.module("poabus").controller("BusController",["$scope","servicebusinpoa","$location","$filter",function($scope,servicebusinpoa,$location,$filter){"use strict";$scope.$watch("items",function(newvalue,oldvalue){var filtro=$filter("filter")($scope.items,"true");null!=oldvalue&&$scope.$emit("someEvent",filtro.length)},!0),servicebusinpoa.listbus().then(function(stuff){$scope.items=stuff},function(){console.error("File not found!")})}]),angular.module("poabus").controller("LotacaoController",["$scope","servicebusinpoa",function($scope,servicebusinpoa){"use strict";$scope.isbus=!1,$scope.islotacao=!0,servicebusinpoa.listlotacao().then(function(stuff){$scope.items=stuff},function(){console.error("File not found!")})}]),angular.module("poabus").controller("MapController",["$scope","servicepoabus","$routeParams",function($scope,servicepoabus,$routeParams){"use strict";function initialize(){var latlng=new google.maps.LatLng(-30.044876,-51.1835),options={zoom:13,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("mapa"),options)}var map,cordinates=[];initialize(),servicepoabus.itinerario($routeParams.term).then(function(stuff){var i,rota;for(i=0;i<stuff.length;i+=1)null!=stuff[i].lat&&cordinates.push(new google.maps.LatLng(stuff[i].lat,stuff[i].lng));rota=new google.maps.Polyline({path:cordinates,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}),rota.setMap(map)},function(){console.error("File not found!")})}]),angular.module("poabus").controller("RootController",["$scope","$location","$rootScope","$window",function($scope,$location,$rootScope,$window){"use strict";$scope.slide="slide-left",$scope.$on("someEvent",function($event,data){$scope.count=data}),$scope.goTo=function(string){$scope.slide="slide-left",$location.path(string)},$scope.back=function(){$scope.slide="slide-right",$window.history.back()}}]),angular.module("poabus").service("servicebusinpoa",["$http","$q",function($http,$q){"use strict";var p,send=function(url){return p=$q.defer(),null!=localStorage.getItem(url)?p.resolve(JSON.parse(localStorage.getItem(url))):$http.get(url).success(function(dados){p.resolve(dados),localStorage.setItem(url,JSON.stringify(dados))}).error(function(error){alert("error:"+error),p.reject()}),p.promise};this.listbus=function(){return send("http://10.51.100.33:5000/list/bus")},this.listlotacao=function(){return send("http://10.51.100.33:5000/list/lotacao")},this.itinerario=function(id){return send("http://10.51.100.33:5000/itinerario/"+id)}}]);